@using MvcPaging

@model IPagedList<Rajpal.Models.PropertyModell>
@{
    ViewBag.Title = "MyFavourite";
    Layout = "~/Views/Shared/_Layoutproperty.cshtml";
}


<section class="main-listing">
    <div class="container">

        <ul class="ht-breadcrumbs ht-breadcrumbs--y-padding">
            <li class="ht-breadcrumbs__item"><a href="#" class="ht-breadcrumbs__link"><span class="ht-breadcrumbs__title">Home</span></a></li>
            <li class="ht-breadcrumbs__item"><a href="#" class="ht-breadcrumbs__link"><span class="ht-breadcrumbs__title">Listing</span></a></li>
            <li class="ht-breadcrumbs__item"><span class="ht-breadcrumbs__page">List View V2</span></li>
        </ul><!-- ht-breadcrumb -->
    </div><!-- .container -->
    <div class="main-listing__main">
        <div class="container">
            <div class="row">
                <h1 class="section__title section__title--centered section__title--b-margin-40">Open Houses</h1>
                <aside class="col-md-3">
                    @{
                        Html.RenderPartial("~/Views/SearchBar_Partial.cshtml");
                    }
                    @if (Request.RequestContext.HttpContext.Session["UserId"] != "" && Request.RequestContext.HttpContext.Session["UserId"] != null)
                    {
                        <section class="widget main-listing__widget widget__news">
                            <h3 class="widget__title">Welcome</h3>
                            <ul class="widget__news-list">
                                <li class="widget__news-item"><a href="#">Home</a></li>
                                <li class="widget__news-item"><a href="#">Bookmarked Properties</a></li>
                                <li class="widget__news-item"><a href="#">Edit Account</a></li>
                                <li class="widget__news-item"><a href="#">Saved Property Searches</a></li>
                                <li class="widget__news-item"><a href="#">Log Out</a></li>
                            </ul>
                        </section><!-- .widget -->
                    }
                </aside><!-- .col -->
                <main class="col-md-9">
                    <div class="listing-sort listing-sort--main-listing">
                        <div class="listing-sort__inner">
                            <ul class="listing-sort__list">
                                <li id="List" class="listing-sort__item ListOrGrid"><a href="#" class="listing-sort__link listing-sort__link--active"><i class="fa fa-th-list" aria-hidden="true" class="listing-sort__icon"></i></a></li>
                                <li id="Grid" class="listing-sort__item ListOrGrid"><a href="#" class="listing-sort__link"><i class="fa fa-th-large" aria-hidden="true" class="listing-sort__icon"></i></a></li>
                            </ul>

                            <span class="listing-sort__result">Total Record Found @ViewBag.TotalData</span>

                            <p class="listing-sort__sort">
                                <label for="sort-type" class="listing-sort__label"><i class="fa fa-sort-amount-asc" aria-hidden="true"></i> Sort by </label>
                                <select name="sort-type" id="sort-type" class="ht-field listing-sort__field">
                                    <option value="default">Default</option>
                                    <option value="low-price">Price (Low to High)</option>
                                    <option value="high-price">Price (High to Low)</option>

                                </select>
                            </p><!-- .listing-sort__sort -->
                        </div><!-- .listing-sort__inner -->
                    </div><!-- .listing-sort -->
                    @*<div class="main-listing__tags">
                            <span class="main-listing__result">25 items found</span>
                            <ul class="main-listing__list">
                                <li class="main-listing__tag">
                                    <span class="main-listing__tag-label">Property Type:</span>House
                                    <a href="#" class="main-listing__tag-close">&times;</a>
                                </li><!-- .main-listing__tag -->
                                <li class="main-listing__tag">
                                    <span class="main-listing__tag-label">City:</span>New York
                                    <a href="#" class="main-listing__tag-close">&times;</a>
                                </li><!-- .main-listing__tag -->
                            </ul><!-- .main-listing__list -->
                            <a href="#" class="main-listing__clear">Clear All</a>
                        </div>*@<!-- .main-listing__tags -->
                    @using (Ajax.BeginForm("Index", "Property",
                            new AjaxOptions { UpdateTargetId = "grid-list", HttpMethod = "get", LoadingElementId = "loading", OnBegin = "beginPaging", OnSuccess = "successPaging", OnFailure = "failurePaging" },
                            new { id = "frm-search" }))
                    {
                        <div id="grid-list">
                            <section>

                                @foreach (var item in Model)
                                {
                                    <div class="item-grid__container">
                                        <div class="listing listing--v2">
                                            <div class="item-grid__image-container item-grid__image-container--open-houses">
                                                <a>
                                                    <div class="item-grid__image-overlay"></div><!-- .item-grid__image-overlay -->
                                                    <img src="@item.pImage" alt="@item.Style in @item.Area" class="listing__img">
                                                    <span class="item__label">@item.SaleLease</span>
                                                    <span id="@item.MLS" class="listing__favorite listing__favorite--v2"><i class="fa fa-heart-o" aria-hidden="true"></i></span>
                                                </a>
                                            </div><!-- .col -->
                                            <div class="item-grid__content-container item-grid__content-container--open-houses">
                                                <div class="listing__content--open-houses">
                                                    <div class="listing__header">
                                                        <div class="listing__header-primary width-100">
                                                            <span class="listing__type font-size-18">@item.TypeOwn1Out</span>
                                                            <a class="appointment float-right"><i class="fa fa-phone fa-fw" aria-hidden="true"></i>Appointment</a>
                                                            <h5 class="listing__title h5_font"><b>MLS:</b> #@item.MLS</h5>
                                                            <p class="listing__location"><span class="ion-ios-location-outline listing__location-icon"></span> @item.Address, @item.Municipality, @item.PostalCode, @item.Province </p>
                                                            <p class="listing__price listing__price--open-houses color-red">@item.ListPrice</p>
                                                        </div><!-- .listing__header-primary -->

                                                    </div><!-- .listing__header -->
                                                    <div class="listing__details">
                                                        <ul class="listing__stats">
                                                            @if (@ViewBag.Type != "Commercial")
                                                            {
                                                                if (item.Bedrooms == "null")
                                                                {
                                                                    <li><span class="listing__figure">Not Available</span>  Beds</li>
                                                                }
                                                                else
                                                                {
                                                                    <li><span class="listing__figure">@item.Bedrooms<sup>&plus;</sup></span> Beds</li>
                                                                }

                                                                if (item.Washrooms == "null")
                                                                {
                                                                    <li><span class="listing__figure">Not Available</span>  Baths</li>
                                                                }
                                                                else
                                                                {
                                                                    <li><span class="listing__figure">@item.Washrooms</span> Baths</li>
                                                                }


                                                            }
                                                            @if (item.ApproxSquareFootage == "null")
                                                            {
                                                                <li><span class="listing__figure">Not Available</span>  sq.ft</li>
                                                            }
                                                            else
                                                            {
                                                                <li><span class="listing__figure">@item.ApproxSquareFootage</span> sq.ft</li>
                                                            }

                                                        </ul><!-- .listing__stats -->
                                                        
                                                        <a href="single_property_1.html" class="listing__btn">Details <span class="listing__btn-icon"><i class="fa fa-angle-right" aria-hidden="true"></i></span></a>
                                                        @*<div class="open-houses">
                                        <a href="single_property_1.html" class="open-houses__btn"><strong>Open House</strong> July 8, 2018 12.00 pm to 6.00 pm</a>
                                        <span class="open-houses__desc">Listed on 3 months ago by <span class="open-houses__agency">RealEstate</span></span>
                                    </div>*@<!-- .open-houses -->
                                                    </div><!-- .listing__details -->
                                                </div><!-- .listing-content -->
                                            </div><!-- .col -->
                                        </div><!-- .listing -->
                                    </div><!-- .item-grid__container -->
                                }
                                <div class="pager1">
                                    @Html.Raw(Ajax.Pager(
            new Options
            {
                PageSize = Model.PageSize,
                TotalItemCount = Model.TotalItemCount,
                CurrentPage = Model.PageNumber,
                ItemTexts = new ItemTexts() { Next = "Next", Previous = "Previous", Page = "P" },
                ItemIcon = new ItemIcon() { First = "icon-backward", Previous = "icon-chevron-left", Next = "icon-chevron-right", Last = "icon-forward" },
                TooltipTitles = new TooltipTitles() { Next = "Next page", Previous = "Previous page", Page = "Page {0}." },
                Size = Size.normal,
                Alignment = Alignment.centered,
                IsShowControls = true,
                IsShowFirstLast = true,
                CssClass = ""
            },
            new AjaxOptions
            {
                UpdateTargetId = "grid-list",
                OnBegin = "beginPaging",
                OnSuccess = "successPaging",
                OnFailure = "failurePaging"
            }, new { controller = "Property", action = "MyFavourite", IsList = "List" }))
                                    <div class="well">
                                        Showing <span class="badge badge-success">@Model.ItemStart</span> to <span class="badge badge-success">@Model.ItemEnd</span>
                                        of <span class="badge badge-info">@Model.TotalItemCount</span> entries
                                    </div>
                                </div>
                            </section>

                           </div>
                    }
                    @*<ul class="pagination pagination--t-margin">
                            <li class="pagination__item">
                                <a href="#" class="pagination__link pagination__link_prev"><i class="fa fa-angle-left" aria-hidden="true"></i></a>
                            </li>
                            <li class="pagination__item"><a href="#" class="pagination__link pagination__link--selected">1</a></li>
                            <li class="pagination__item"><a href="#" class="pagination__link">2</a></li>
                            <li class="pagination__item"><a href="#" class="pagination__link">3</a></li>
                            <li class="pagination__item"><a href="#" class="pagination__link pagination__link_next"><i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
                        </ul>*@<!-- pagination -->
                </main><!-- .col -->
            </div><!-- row -->
        </div><!-- .container -->
    </div><!-- .main-listing__main -->
</section><!-- .main-listing -->
<a href="#modal-dialog" id="md_btn" class="btn btn-sm btn-success" style="display:none" data-toggle="modal">Demo</a>
<div class="modal fade reason" id="modal-dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <span>Appointment</span>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>

            </div>
            <div class="modal-body">
                @{
                    Html.RenderPartial("~/Views/Appointment_Partial.cshtml");
                }
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-1"></div>
                    <input type="button" id="btnAppointment" class="contact-form__submit col-md-4 btnAppointment" name="submit" value="Send Message">
                    <div class="col-md-2"></div>
                    <input type="button" data-dismiss="modal" class="contact-form__submit col-md-4" name="submit" value="Close">
                    <div class="col-md-1"></div>
                </div>


            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    function beginPaging(args) {
        // Animate
        $('#grid-list').fadeOut('normal');
    }

    function successPaging() {
        // Animate
        $('#grid-list').fadeIn('normal');
        $('a').tooltip();
    }

    function failurePaging() {
        alert("Could not retrieve list.");
    }

</script>

